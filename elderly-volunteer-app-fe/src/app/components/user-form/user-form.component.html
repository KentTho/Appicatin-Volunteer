<div class="user-form-container">
  <h2>Ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n</h2>

  <!-- üü¢ Popup Th√¥ng b√°o -->
  <div class="popup-container">
    <p class="popup-message success-message" *ngIf="successMessage">
      {{ successMessage }}
    </p>
    <p class="popup-message error-message" *ngIf="errorMessage">
      {{ errorMessage }}
    </p>
  </div>

  <!-- üîµ B∆∞·ªõc 1 -->
  <form *ngIf="step === 1">
    <div class="input-group">
      <label for="name">H·ªç v√† T√™n</label>
      <input
        type="text"
        id="name"
        [(ngModel)]="user.name"
        name="name"
        required
      />
      <p class="error-text" *ngIf="fieldErrors.name">{{ fieldErrors.name }}</p>
    </div>

    <div class="input-group">
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        [(ngModel)]="user.email"
        name="email"
        readonly
      />
      <p class="error-text" *ngIf="fieldErrors.email">
        {{ fieldErrors.email }}
      </p>
    </div>

    <div class="input-group">
      <label for="role">Vai tr√≤</label>
      <input
        type="text"
        id="role"
        [value]="getRoleLabel(user.role)"
        name="role"
        readonly
      />
    </div>

    <button type="button" class="btn btn-primary" (click)="nextStep()">
      Ti·∫øp t·ª•c
    </button>
  </form>

  <!-- üîµ B∆∞·ªõc 2 -->
  <form *ngIf="step === 2">
    <div class="input-group">
      <label for="phone">S·ªë ƒëi·ªán tho·∫°i</label>
      <input
        type="text"
        id="phone"
        [(ngModel)]="user.phone"
        name="phone"
        required
      />
      <p class="error-text" *ngIf="fieldErrors.phone">
        {{ fieldErrors.phone }}
      </p>
    </div>

    <div class="input-group">
      <label for="address">ƒê·ªãa ch·ªâ</label>
      <input
        type="text"
        id="address"
        [(ngModel)]="user.address"
        name="address"
        required
      />
      <p class="error-text" *ngIf="fieldErrors.address">
        {{ fieldErrors.address }}
      </p>
    </div>

    <div class="input-group">
      <label for="location">V·ªã tr√≠</label>
      <input
        type="text"
        id="location"
        [(ngModel)]="user.location"
        name="location"
        required
      />
      <p class="error-text" *ngIf="fieldErrors.location">
        {{ fieldErrors.location }}
      </p>
    </div>

    <div class="button-group">
      <button type="button" class="btn btn-secondary" (click)="prevStep()">
        üîô Quay l·∫°i
      </button>
      <button type="button" class="btn btn-primary" (click)="nextStep()">
        Ti·∫øp t·ª•c
      </button>
    </div>
  </form>

  <!-- üîµ B∆∞·ªõc 3 -->
  <form *ngIf="step === 3" (submit)="updateUser()">
    <div class="input-group">
      <label for="preferences">S·ªü th√≠ch</label>
      <input
        type="text"
        id="preferences"
        [(ngModel)]="user.preferences"
        name="preferences"
        required
      />
      <p class="error-text" *ngIf="fieldErrors.preferences">
        {{ fieldErrors.preferences }}
      </p>
    </div>

    <div class="input-group">
      <label for="languages">Ng√¥n ng·ªØ</label>
      <input
        type="text"
        id="languages"
        [(ngModel)]="user.languages"
        name="languages"
        required
      />
      <p class="error-text" *ngIf="fieldErrors.languages">
        {{ fieldErrors.languages }}
      </p>
    </div>

    <div class="input-group">
      <label for="skills">K·ªπ nƒÉng</label>
      <input
        type="text"
        id="skills"
        [(ngModel)]="user.skills"
        name="skills"
        required
      />
      <p class="error-text" *ngIf="fieldErrors.skills">
        {{ fieldErrors.skills }}
      </p>
    </div>

    <div class="input-group">
      <label for="experience">Kinh nghi·ªám</label>
      <textarea
        id="experience"
        [(ngModel)]="user.experience"
        name="experience"
        required
      ></textarea>
      <p class="error-text" *ngIf="fieldErrors.experience">
        {{ fieldErrors.experience }}
      </p>
    </div>

    <div class="input-group">
      <label for="bio">Gi·ªõi thi·ªáu b·∫£n th√¢n</label>
      <textarea id="bio" [(ngModel)]="user.bio" name="bio" required></textarea>
      <p class="error-text" *ngIf="fieldErrors.bio">{{ fieldErrors.bio }}</p>
    </div>

    <div class="button-group">
      <button type="button" class="btn btn-secondary" (click)="prevStep()">
        üîô Quay l·∫°i
      </button>
      <button type="submit" class="btn btn-primary">üíæ C·∫≠p nh·∫≠t</button>
    </div>
  </form>
</div>
